![](https://img.foresightnews.pro/202303/e1bfebb9872baab01955c4d295cb47c1.png?x-oss-process=style/scale70)

*ä½œè€…ï¼šOghrul Maharramov*

*è‡´è°¢ï¼šæ„Ÿè°¢ Justin Drake å’Œ Bartek Kiepuszewski çš„è¯„è®º.*

*ç¿»è¯‘ï¼šJunwei*

  


å»å¹´ï¼ŒVitalik Buterin æå‡ºäº†[å¤šè¯æ˜è€… (Mutli-Provers)](http://mp.weixin.qq.com/s?__biz=MzkyMTQxNTg0MQ==&mid=2247484016&idx=1&sn=a7578e2c3d2652fb18d0d79748781798&chksm=c182bbbef6f532a82f2caffe5d74ddf3db605ae08d3eee3cdd59cb94da1f2bdb888877cb75d6&scene=21#wechat_redirect) çš„æƒ³æ³•ã€‚å¤šè¯æ˜è€…çš„æƒ³æ³•å½’ç»“ä¸ºä½¿ç”¨ä¸¤ä¸ªæˆ–å¤šä¸ªçŠ¶æ€è½¬æ¢æ­£ç¡®æ€§æ‰§è¡Œæœºåˆ¶ï¼ˆstate transition correctness enforcement mechanismsï¼Œä»¥ä¸‹ç®€ç§° STCEMï¼‰æ¥åº”å¯¹å¯èƒ½åœ¨ STCEM ä¸­è¢«åˆ©ç”¨çš„æ¼æ´ã€‚ä¾‹å¦‚ï¼Œåœ¨æœ€ç»ˆç¡®å®šç›¸åº”çš„çŠ¶æ€æ ¹ä¹‹å‰ï¼ŒéªŒè¯æ¡¥å¯èƒ½éœ€è¦æ¥è‡ªä¸¤ä¸ªä¸åŒçš„ STCEMï¼ˆä¾‹å¦‚åŸºäºæ¬ºè¯ˆè¯æ˜çš„ STCEM å’ŒåŸºäºé›¶çŸ¥è¯†è¯æ˜çš„ STCEMï¼‰çš„å£°æ˜ã€‚æ­¤å¤–ï¼ŒJustin Drake æå‡ºäº† (https://ethresear.ch/t/2fa-zk-rollups-using-sgx/14462) 2/2 çš„å¤šè¯æ˜è€…çš„å…·ä½“å®ä¾‹ï¼Œå®ƒç»“åˆäº†åŸºäºé›¶çŸ¥è¯†è¯æ˜çš„ STCEM å’ŒåŸºäº TEE çš„ STCEMã€‚

è™½ç„¶å¤šè¯æ˜è€…å¯èƒ½åœ¨åŠ å¼º rollup çš„å®‰å…¨å±æ€§æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ï¼Œä½†è¿™å¹¶ä¸æ˜¯éªŒè¯åŸºäºè·¨é“¾æ¡¥åè®®çš„å¼€å‘è€…å’Œç”¨æˆ·å…³å¿ƒå®ƒçš„å”¯ä¸€åŸå› ã€‚ä» Rekt Dashboard(https://rekt.news/leaderboard/) å¯ä»¥å‘ç°ï¼Œè¿„ä»Šä¸ºæ­¢ç»å¤§å¤šæ•°é»‘å®¢æ”»å‡»éƒ½æ˜¯ç”±äºåˆ©ç”¨æ™ºèƒ½åˆçº¦æ¼æ´ã€‚è™½ç„¶æ„å»ºçš„ STCEM çš„å¤æ‚æ€§æ„å‘³ç€é™¤æ™ºèƒ½åˆçº¦ä¹‹å¤–çš„å¯æ”»å‡»èŒƒå›´ç›¸å½“å¤§ï¼Œä½†éªŒè¯æ¡¥å®ç°åŒæ ·å¢åŠ äº†ç›¸åº”çš„å¤æ‚åº¦ï¼Œæ„å‘³ç€æ½œåœ¨çš„æ™ºèƒ½åˆçº¦æ¼æ´æ”»å‡»ä»ç„¶æ˜¯ä¸€ä¸ªä¸»è¦é—®é¢˜ã€‚

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æ¦‚è¿°äº†å†—ä½™éªŒè¯æ¡¥çš„è®¾è®¡ï¼Œä¹Ÿç§°ä¸ºå¤šéªŒè¯è€… (Multi-Verifier)ã€‚

  


**æ¦‚è¿°**



---

å¤šéªŒè¯è€…ç”±å››ä¸ªä¸åŒçš„è¦ç´ ç»„æˆï¼š

1.Â  ä¸€ä¸ªå¯å…¬å¼€è®¿é—®çš„ APIï¼Œç”¨æˆ· / rollup å¯ä»¥é€šè¿‡è¯¥ API ä¸è·¨é“¾æ¡¥è¿›è¡Œäº¤äº’ï¼Œç§°ä¸ºÂ Â EntryPointÂ 

2.Â  éªŒè¯æ¡¥çš„ Solidity å®ç°ï¼Œç§°ä¸º Â VerifierSolidityÂ ï¼ˆæ³¨æ„Â VerifierSolidityÂ å®ç°ä¸­å¯èƒ½ä¸ºä¸€å¥—æ™ºèƒ½åˆçº¦è€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„åˆçº¦ï¼‰

3.Â  éªŒè¯æ¡¥çš„ Vyper å®ç°ï¼Œç§°ä¸ºÂ  Â VerifierVyperÂ ï¼ˆæ³¨æ„Â Â VerifierVyperÂ  å®ç°ä¸­ä¹Ÿå¯èƒ½ä¸ºä¸€å¥—æ™ºèƒ½åˆçº¦è€Œä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„åˆçº¦ï¼‰å’Œ

4.Â  å…±äº«å­˜å‚¨ï¼Œå‘½åä¸º Â SharedStorageÂ 

å¤šéªŒè¯è€…æ—¨åœ¨ä¿è¯ rollup çš„å®‰å…¨æ€§ï¼Œåªè¦å…¶ä¸­ä¸€ä¸ªéªŒè¯å™¨æ­£ç¡®å®ç°å³å¯ã€‚ä½†è¯¥è®¾è®¡æ— æ³•é˜²èŒƒå› ä¸æ­£ç¡®çš„åè®®è§„èŒƒè€Œå¯¼è‡´çš„æ¼æ´ã€‚

  


**è¯¦ç»†é˜è¿°**



---

æ³¨æ„ï¼šä¸‹é¢æ¦‚è¿°çš„å¤šéªŒè¯å™¨è®¾è®¡åŸºäº zkRollup éªŒè¯æ¡¥è®¾è®¡ï¼Œå¯ä»¥ç®€å•åœ°ä¼˜åŒ–å®ç°å’Œ Optimistic Rollup éªŒè¯æ¡¥ä¸€èµ·å·¥ä½œã€‚

**EntryPoint**

Â EntryPointÂ æ˜¯ä¸€ä¸ªå¯å…¬å¼€è®¿é—®çš„ APIï¼Œç”¨æˆ· / rollup å¯ä»¥é€šè¿‡å®ƒä¸è·¨é“¾æ¡¥è¿›è¡Œäº¤äº’ã€‚Â EntryPointÂ çš„å®ç°æœ‰æ„ä¿æŒå°½å¯èƒ½ç®€æ´ï¼Œä»¥é¿å…ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Œè¿™äº›å¤æ‚æ€§å¯èƒ½å¯¼è‡´æ½œåœ¨æ¼æ´çš„èŒƒå›´æ›´å¤§ã€‚Â EntryPointÂ Â å¯ä»¥ç”¨ Solidity æˆ– Vyper å…·ä½“å®ç°ã€‚

Â EntryPointÂ Â æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š

1.Â  è°ƒç”¨éªŒè¯æ¡¥çš„ä¸¤ä¸ªå…·ä½“å®ä¾‹çš„ç›¸åº”å‡½æ•°ï¼Œ

2.Â  éªŒè¯éªŒè¯æ¡¥å…·ä½“å®ä¾‹çš„ç›¸åº”å‡½æ•°æ‰€è¿”å›çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶ä¸”ç¡®å®å·²ç»å†™å…¥Â Â SharedStorageÂ ã€‚

ä¸‹é¢æ˜¯ç”¨ä¼ªä»£ç ç¼–å†™çš„Â Â Â EntryPointÂ Â çš„æŠ½è±¡è§„èŒƒï¼š


```
function appendBatch(batch) {  
    (flagSolidity, storedDataSolidity) = VerifierSolidity.appendBatch(batch)  
    require(flagSolidity == true)  
      
    (flagVyper, storedDataVyper) = VerifierVyper.appendBatch()  
    require(flagVyper == true)  
      
    require(ShareStorage.checkStorage(APPENDBATCH, storedDataSolidity, storedDataVyper) == true)  
}      
  
function finalizeBatch(validityProof, publicInputs) {  
    (flagSolidity, storedDataSolidity) = VerifierSolidity.finalizeBatch(validityProof, publicInputs)  
    require(flagSolidity == true)  
      
    (flagVyper, storedDataVyper) = VerifierVyper.finalizeBatch(validityProof, publicInputs)  
    require(flagVyper == true)  
      
    require(ShareStorage.checkStorage(FINALIZEBATCH, storedDataSolidity, storedDataVyper) == true)  
}  
  
  
function deposit(message) {  
    (flagSolidity, storedDataSolidity) = VerifierSolidity.deposit(message)  
    require(flagSolidity == true)  
      
    (flagVyper, storedDataVyper) = VerifierVyper.deposit(message)  
    require(flagVyper == true)  
      
    require(ShareStorage.checkStorage(DEPOSIT, storedDataSolidity, storedDataVyper) == true)  
}  
  
function withdraw(message) {  
    (flagSolidity, storedDataSolidity) = VerifierSolidity.withdraw(message)  
    require(flagSolidity == true)  
      
    (flagVyper, storedDataVyper) = VerifierVyper.withdraw(message)  
    require(flagVyper == true)  
      
    require(ShareStorage.checkStorage(WITHDRAW, storedDataSolidity, storedDataVyper) == true)  
}  

```
**VerifierSolidity**

Â VerifierSolidityÂ Â æ˜¯åœ¨ Solidity ä¸­å®ç°çš„ Rollup éªŒè¯æ¡¥çš„å…·ä½“å®ä¾‹ã€‚ç”±äºÂ VerifierSolidityÂ Â æ˜¯ Â EntryPointÂ Â è°ƒç”¨çš„ç¬¬ä¸€ä¸ªéªŒè¯æ¡¥å®ä¾‹ï¼Œå› æ­¤å…è®¸å®ä¾‹æ”¹å˜Â  Â SharedStorageÂ Â çš„çŠ¶æ€ã€‚Â VerifierSolidityÂ Â é¢„æœŸå°†è¿”å›å†™å…¥ Â SharedStorageÂ Â çš„å€¼ã€‚

**VerifierVyper**

Â VerifierVyperÂ Â æ˜¯åœ¨ Vyper ä¸­å®ç°çš„ Rollup éªŒè¯æ¡¥çš„å…·ä½“å®ä¾‹ã€‚ç”±äºÂ VerifierVyperÂ æ˜¯ Â EntryPointÂ Â è°ƒç”¨çš„ç¬¬äºŒä¸ªéªŒè¯æ¡¥å®ä¾‹ï¼Œå› æ­¤å…è®¸å®ä¾‹è¯»å–Â  Â SharedStorageÂ Â çš„çŠ¶æ€ã€‚Â VerifierVyperÂ Â é¢„æœŸå°†è¿”å›è¯»å–è‡ªÂ Â SharedStorageÂ Â çš„å€¼ã€‚

**SharedStorage**

é¡¾åæ€ä¹‰ï¼Œ Â SharedStorageÂ Â æ˜¯éªŒè¯æ¡¥çš„ä¸¤ä¸ªå…·ä½“å®ä¾‹çš„å…±äº«å­˜å‚¨ã€‚åªå…è®¸Â VerifierSolidityÂ Â å†™å…¥ï¼Œè€Œè¯»å–è®¿é—®æ˜¯æ— è®¸å¯çš„ã€‚Â SharedStorageÂ çš„å®ç°æœ‰æ„ä¿æŒå°½å¯èƒ½çš„ç®€æ´ï¼Œä»¥é¿å…ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Œè¿™äº›å¤æ‚æ€§å¯èƒ½å¯¼è‡´æ½œåœ¨æ¼æ´çš„èŒƒå›´æ›´å¤§ã€‚Â SharedStorageÂ Â å¯ä»¥åœ¨ Solidity æˆ– Vyper ä¸­å…·ä½“å®ç°ã€‚

ä¸‹é¢æ˜¯ç”¨ä¼ªä»£ç ç¼–å†™çš„ Â SharedStorageÂ Â æŠ½è±¡è§„èŒƒï¼š


```
function read(type){  
    if(type == APPENDBATCH) {  
        ...  
    } else if(type == FINALIZEBATCH) {  
        ...  
    } else if(type == DEPOSIT) {  
        ...  
    } else if(type == WITHDRAW) {  
        ...  
    }  
}  
  
function write(type, data){  
    require(msg.sender == addressVerifierSolidity)  
      
    if(type == APPENDBATCH) {  
        ...  
    } else if(type == FINALIZEBATCH) {  
        ...  
    } else if(type == DEPOSIT) {  
        ...  
    } else if(type == WITHDRAW) {  
        ...  
    }  
}  
  
function checkStorage(type, dataSolidity, dataVyper){  
    if(type == APPENDBATCH) {  
        ...  
    } else if(type == FINALIZEBATCH) {  
        ...  
    } else if(type == DEPOSIT) {  
        ...  
    } else if(type == WITHDRAW) {  
        ...  
    }  
}
```
**ç»“è®º**



---

è™½ç„¶å¤šéªŒè¯è€…å¢åŠ äº†è·¨é“¾æ¡¥çš„æˆæœ¬ï¼Œå¢åŠ äº†åè®®çš„å†—ä½™ï¼Œä½†ä½¿å¼€å‘è€…å’Œç”¨æˆ·èƒ½å¤Ÿä»¥æ›´å®‰å…¨çš„æ–¹å¼ä¸åŸºäºéªŒè¯æ¡¥çš„åè®®è¿›è¡Œäº¤äº’ã€‚ä¸ºäº†è·å¾—æœ€å¤§çš„å¼¹æ€§ï¼Œå¤šéªŒè¯è€…åº”è¯¥ä¸å¤šè¯æ˜è€…ç›¸ç»“åˆã€‚

**æ·»åŠ Scrollerç¤¾åŒºç®¡ç†å‘˜å¾®ä¿¡è¿›å…¥Scrollä¸­æ–‡ç¤¾åŒº**![](https://img.foresightnews.pro/202303/7581ee9e597117f838a203b1b767617f.jpeg?x-oss-process=style/scale70)**ğŸ‘‡*ç‚¹å‡»ä¸‹æ–¹é˜…è¯»åŸæ–‡ï¼Œå‚ä¸ Ethereum Research çš„æ¢è®¨*  
