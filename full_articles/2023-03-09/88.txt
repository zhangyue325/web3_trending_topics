来源 | blog.ethereum.org

作者 | Protocol Support Team

翻译 | Stephanie, ECN

  


* 提款就要来了！Shapella 网络升级将在 Goerli 网络的 epoch 162304 上激活，计划在 2023 年北京时间 3 月 15 日 06:25:36 AM。

  


* 质押者和节点运行者应该阅读本文以及提款 FAQ。( 注：提款 FAQ 可阅读今天的发布的中文版 )

  


* 在 Goerli 升级前，Zhejiang 测试网可以用来测试 Shapella 的功能。

  


* Shapella 社区会议计划在 2023 年北京时间 3 月 13 日 23:00 进行

  


* 读者可以现在注册，接收这些升级的公告。滚动到页面底部就可以注册📩

  


在 Sepolia 的顺利升级后，Shapella 升级现在在 Goerli 测试网进行。这预期回事 Shapella 在以太坊主网升级的前的最后一个测试网升级。

  


此次升级紧随 The Merge，使得验证者可以把他们的押金从信标链提取回执行层。它还给执行层和共识层引入新功能，请看下文。

  


**升级规范**

  


Shapella 升级结合了对执行层 ( 上海升级 ) 和共识层 (Capella) 的修改。用于执行层和共识层通信的 Engine API 也在 Shapella 升级里有修改。

  


**上海升级**

  


在上海升级里纳入的执行层的修改可以在这里找到。作为参考，内容如下：

  


* EIP-3651: Warm COINBASE ( 降低访问 COINBASE 地址的 gas 开销 )
* EIP-3855: PUSH0 instruction ( 新增操作码 `PUSH0)
* EIP-3860: Limit and meter initcode ( 对 initcode 的大小设限并引入 gas 计量 )
* EIP-4895: Beacon chain push withdrawals as operations ( 信标链推式提款作为系统操作 )
* EIP-6049: Deprecate SELFDESTRUCT ( 停用 SELFDESTRUCT)

  


请注意，EIP-6049 只是一个操作码弃用警告。客户端团队预计 SELFDESTRUCT 语义将在未来的网络升级中进行修改，但该操作码的行为在上海升级中保持不变。

  


此外，上海升级的全套修改现在可以在 以太坊执行层规范 (EELS) 查看，它是用于执行层的新 Python 参考实现。

  


**Capella 升级**

  


Capella 升级对共识层的修改详情在 capella 目录的 v1.3.0-rc.3 规范里。从高层次来讲，这次升级引入了：

  


* 验证者的完整和部分提款
* BLSToExecutionChange 消息，它允许使用 BLS\_WITHDRAWAL\_PREFIX 的验证者把提款更新到 ETH1\_ADDRESS\_WITHDRAWAL\_PREFIX，这是提款的前提。
* 分开的状态和区块历史数据累加器，取代原来的单个的历史数据根

  


我们鼓励质押者都去阅读《提款 FAQ》，以了解更多关于验证者应该如何准备 Capella 的资讯。

  


**Engine API**

  


对 Engine API 的修改可以在 execution-apis repository 的 shanghai.md 文档里找到。简而言之，引入了 WithdrawalV1 结构，并添加了多个相关结构和函数。

  


**客户端版本**

  


以下的客户端版本支持在 Goerli 测试网的 Shanghai & Capella 升级。请注意，这些版本都只用于 Goerli 测试网。下一个公告将会是关于主网升级版本

  


当在选择运行哪个客户端时，验证者应该特别注意在执行层和共识层运行多数客户端的风险。关于这些风险以及他们的后果可以阅读这篇文章了解更多。而如果想预估当前执行层和共识层客户端的分布，以及了解如何从一个客户端切换至另一个客户端，则可以阅读这篇文章。

  


**共识层 Goerli 升级版本**

  


![](https://img.foresightnews.pro/202303/f6ca5c0384477d3b0049c89b6b857f9d.jpeg?x-oss-process=style/scale70)  


**执行层 Goerli 升级版本**

  


![](https://img.foresightnews.pro/202303/9d0f17638360ace0d9cd72dc3dd6d55f.png?x-oss-process=style/scale70)  


  


**FAQ**

  


➤ 作为一个以太坊用户或者 ETH 持有者，我需要做什么？

  


简单来说，没有。

  


如果你使用交易所、数字钱包或硬件钱包，你不需要做任何事情，除非你的交易所或钱包提供商通知你采取额外的措施。

  


如果你运行自己的以太坊节点，请参阅下文。

  


➤ 作为一个非质押的节点运营商，我需要做什么？

  


为了与 Goerli 测试网的 Shapella 升级兼容，请将你的节点更新到上文表中所列的以太坊客户端版本。

  


➤ 作为一个质押者，我需要做什么？

  


为了与 Goerli 测试网的 Shapella 升级兼容，请将你的节点更新到上文表中所列的以太坊客户端版本。

  


我们建议你阅读《提款 FAQ》。另外，你可以在 Goerli 测试网激活升级之前，在短暂运行的浙江测试网上进行测试。

  


请注意，Goerli 测试网将是主网前最后一个测试网升级。换句话说，这是测试你的设置的最后机会了！如果你有疑问，我们推荐你参加 Shapella 社区会议。

  


➤ 如果我是一个验证者或节点运行者，且不参加这次升级，会怎么样？

  


如果你使用的以太坊客户端没有更新到上面列出的最新版本，一旦升级发生，你的客户端将同步到分叉前的区块链上。

  


你将被困在一个不兼容的链上，遵循旧的规则，无法发送 ETH 或在 Shapella 升级后的以太坊网络上操作。

  


➤ 作为一个应用程序或工具开发者，我应该怎么做？

  


Shapella 不会为智能合约引入破坏性变化。应用程序和工具开发人员应审阅升级修改，以确保任何问题都解决了，或了解如何使用新引入的功能。

  


➤ 为什么叫 "Shapella"？

  


执行层的升级按照 Devcon 举办城市来起名，而共识层的升级则根据恒星名字来取。"Shapella" 是上海 (Devcon 2 的举办地 ) 和 Capella (Auriga 北方星座中最亮的星 ) 的结合。

  


➤ 我可以在哪里监测此次升级？

  


EthStaker 将在 Goerli 升级期间举办直播。读者可以看这里。

  


➤ 求帮助——我还有问题！

  


如果你还有其他问题，可以参加北京时间 3 月 13 日 23:00 进行的 Shapella 社区会议。客户端开发者、研究员和其他人都将出席并回答问题。

  


  


封面图由 Yiran Ding 提供

  


点击“阅读原文”获取文章内部链接！

原文链接：https://blog.ethereum.org/2023/02/21/sepolia-shapella-announcement  


  


ECN 的翻译、编辑工作旨在为以太坊中文社区传递优质资讯和学习资源，文章版权归原作者所有，转载须注明原文出处以及 ETH 中文。若需长期转载，请联系 eth@ecn.co 进行授权。

![](https://img.foresightnews.pro/202303/f49c15233c5d398f44865e2226ed8a3e.png?x-oss-process=style/scale70)